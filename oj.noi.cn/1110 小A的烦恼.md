|题目名|《小A的烦恼》|  
|---|---|  
|**题源**|CCF中学生计算机程序设计基础篇例6.5|  
|**OJ**|[oj.noi.cn 1110](http://oj.noi.cn/oj/#main/show/1110)|  
|**标签**|模拟，链表|  
|**难度**|普及组简单题|  

#### 题目  

> 世界上有N(N <= 100000)个城市，有M(M <= 500000)条航线。为了使题目不过分复杂，假设：  
>> 任何一个城市都有至少一条航线直飞其他城市；  
>> 每个城市名字都用一个编号代替，任何两个城市之间最多有1条直飞航线，所以"1 2"跟"2 1"是指同一条航线，连接城市1与城市2。  
> 
> 小A是名旅行爱好者，他比较烦恼，因为他手头的航线列表上只有每条航线连接的城市（见输入格式和输入样例），从这张表很难看出每个城市与哪些城市有直飞航线。现在请你帮他解决这个问题。
> 
> 输入格式：  
>> 第一行包含两个整数N（城市数量）和M（航线数量）。  
>> 接下来M行，每行两个整数，描述一条道路连接的两个城市的编号。
>
> 输出格式：  
>> 输出N行，每一行若干个用一个空格隔开的整数。  
>> 第i行输出的是与城市i直接相连的城市编号，保证城市的出现按照道路输入的先后顺序出现。  
>
> 输入样例：  
>> 4 5  
>> 2 3  
>> 3 1  
>> 1 4  
>> 2 4  
>> 1 2  
>> 
> 输出样例：  
>> 3 4 2  
>> 3 4 1  
>> 2 1  
>> 1 2  

#### 分析  

如果城市少的话，像输入样例那样，就不需要写程序解决问题了。这道题给出的N和M都很大，就算是画成航线图也无法用肉眼看清每个城市与哪些城市通航，那就要借助程序设计的力量了。  
![](/diagrams/oj.noi.cn%201110%20小A的烦恼2.gif)  
最简单的思路是建立N个长度为N的数组，但是由于N值太大，达到10<sup>5</sup>，N * N的int二维数组需要4 * 10<sup>10</sup> = 40 GB，远远超过了题目的空间限制0.262 GB。由于题目中航线数量M < 500K，所以这又是类似稀疏矩阵的问题。我们之前学过用指针构造动态数组，现在介绍另一种方法：用数组实现单向链表，也同样可以节省空间。  

思路是：  

为每个城市建立一个链表，链表中记录其所通航的城市，记录顺序按照输入顺序。于是输出链表中的每个元素时就是输出其所有通航城市的名单。链表的好处是长度不固定，需要多长就添加到多长，就不会浪费空间。  

如何建立链表呢？以输入样例为例说明：第一条航线是"2 3"，所以城市2的链表中第一个元素是3，城市3的链表中第一个元素是2。我们建立一个“足够长的数组”（下文再说到底需要多长），在其中  

#### 答案  

